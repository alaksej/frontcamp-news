!function(e){function t(t){for(var r,i,o=t[0],s=t[1],a=0,c=[];a<o.length;a++)i=o[a],n[i]&&c.push(n[i][0]),n[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(u&&u(t);c.length;)c.shift()()}var r={},n={0:0};function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,i){r=n[e]=[t,i]});t.push(r[2]=o);var s,a=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=function(e){return i.p+"js/"+({1:"newslist"}[e]||e)+".bundle.es6.js"}(e),s=function(t){u.onerror=u.onload=null,clearTimeout(c);var r=n[e];if(0!==r){if(r){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+i+": "+o+")");s.type=i,s.request=o,r[1](s)}n[e]=void 0}};var c=setTimeout(function(){s({type:"timeout",target:u})},12e4);u.onerror=u.onload=s,a.appendChild(u)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var a=0;a<o.length;a++)t(o[a]);var u=s;i(i.s=5)}([function(e,t,r){"use strict";function n(e){return"function"==typeof e}function i(e){return null!=e&&"function"==typeof e[Symbol.iterator]}r.d(t,"b",function(){return n}),r.d(t,"c",function(){return i}),r.d(t,"a",function(){return o});class o{static removeAllChildren(e){for(;e.firstChild;)e.removeChild(e.firstChild)}}},function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"c",function(){return o}),r.d(t,"a",function(){return s});var n=r(2);const i="d63e3d1d1622450aaf814fae749afce1",o=r.n(n).a;class s{constructor(){var e,t,r;e=this,t="_sourcesConfig",r=new Map([["1",{displayName:"Top headlines from BBC News",urlConfig:{endpoint:"top-headlines",params:{sources:"bbc-news"}},isPaginationHidden:!0}],["2",{displayName:"Articles about Bitcoin",urlConfig:{endpoint:"everything",params:{q:"bitcoin"}}}],["3",{displayName:"Top sports headlines",urlConfig:{endpoint:"top-headlines",params:{category:"sport"}}}]]),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}getSearchPanelOptions(){return Array.from(this._sourcesConfig,e=>({value:e[0],displayName:e[1].displayName,isPaginationHidden:e[1].isPaginationHidden}))}getUrlConfig(e){return this._sourcesConfig.get(e).urlConfig}}},function(e,t,r){e.exports=r.p+"d71b28089d8fad554dc1f7a92446bf45.png"},function(e,t){!function(){function e(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var r=e instanceof Node;t.appendChild(r?e:document.createTextNode(String(e)))}),this.appendChild(t)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(t){t.hasOwnProperty("append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value:e})})}()},function(e,t,r){},function(e,t,r){"use strict";r.r(t);r(3);var n={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(n.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function f(e){var t=new FileReader,r=h(t);return t.readAsArrayBuffer(e),r}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:n.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():n.arrayBuffer&&n.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=d(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var e,t,r,n=l(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=h(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=s(e),t=a(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},c.prototype.delete=function(e){delete this.map[s(e)]},c.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},c.prototype.set=function(e,t){this.map[s(e)]=a(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),u(e)},c.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},c.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),u(e)},n.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var r,n,i=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),b.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function m(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function g(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},p.call(y.prototype),p.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];g.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})};var _=self.DOMException;try{new _}catch(e){(_=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),_.prototype.constructor=_}function v(e,t){return new Promise(function(r,i){var o=new y(e,t);if(o.signal&&o.signal.aborted)return i(new _("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new c,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;r(new g(i,n))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.onabort=function(){i(new _("Aborted","AbortError"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&n.blob&&(s.responseType="blob"),o.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),o.signal&&(o.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",a)}),s.send(void 0===o._bodyInit?null:o._bodyInit)})}v.polyfill=!0,self.fetch||(self.fetch=v,self.Headers=c,self.Request=y,self.Response=g);var E=r(1);const P="https://newsapi.org";class O{constructor(e){var t,r,n;if(n=void 0,(r="_apiKey")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,!e)throw new Error("No API key specified");this._apiKey=e}async get(e,t){const r=this._buildUrl(`/v2/${e}`,t);return await this._getDataFromWeb(r,this._apiKey)}_buildUrl(e,t){const r=Object.keys(t).map(e=>`${e}=${t[e]}`).join("&"),n=`${P}${e}`;return r?`${n}?${r}`:n}async _getDataFromWeb(e,t){const r=t?{"x-api-key":t}:{},n=await fetch(e,{headers:r}),i=await n.json();if("error"===i.status)throw new A(i);return i}}class A extends Error{constructor(e){super(),this.name=`NewsAPIError: ${e.code}`,this.message=e.message}}var B=r(0);class C{constructor(){var e,t,r;r=[],(t="_subscribers")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}emit(e){this._subscribers.forEach(t=>t(e))}subscribe(e){if(!Object(B.b)(e))throw new Error("Only functions are allowed as subscribers.");const t=this._subscribers.length;return this._subscribers=[...this._subscribers,e],new T(()=>this._subscribers=this._subscribers.filter((e,r)=>r!==t))}}class T{constructor(e){this._unsubscribeFn=e}unsubscribe(){Object(B.b)(this._unsubscribeFn)&&this._unsubscribeFn()}}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class S{constructor(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sources,t=void 0===e?[]:e;j(this,"_pageEl",document.getElementById("page")),j(this,"_pageElContainer",document.getElementById("pageContainer")),j(this,"_sourceEl",document.getElementById("source")),j(this,"_submitButton",document.getElementById("submit")),j(this,"_submitClick",new C),j(this,"_sourcesConfig",void 0),this._sourcesConfig=t,this._initSourceOptions(this._sourceEl,t),this._submitButton.addEventListener("click",this._onSubmitClick.bind(this)),this.enableSubmit()}get page(){const e=!this._isPaginationHidden&&this._pageEl&&+this._pageEl.value||1;if(!Number.isInteger(e)||e<1)throw new TypeError("The page must be a positive integer number");return e}get source(){return this._sourceEl.value}get submitClick(){return this._submitClick}dispose(){this._pageEl.removeEventListener("click",this._onSubmitClick.bind(this))}disableSubmit(){this._submitButton.setAttribute("disabled","")}enableSubmit(){this._submitButton.removeAttribute("disabled")}_initSourceOptions(e,t){if(!e)throw new Error("Unable to find the source element");B.a.removeAllChildren(e),e.innerHTML=t.map(e=>this._createOption(e)).join(""),this._setPageVisible(),e.addEventListener("change",()=>this._setPageVisible())}get _isPaginationHidden(){return this._sourcesConfig.find(e=>e.value===this.source).isPaginationHidden}_setPageVisible(){this._isPaginationHidden?this._hidePage():this._showPage()}_hidePage(){this._pageElContainer.setAttribute("hidden","")}_showPage(){this._pageElContainer.removeAttribute("hidden")}_createOption(e){let t=e.displayName;return`<option value="${e.value}">${t}</option>`}_onSubmitClick(){this.submitClick.emit({source:this.source,page:this.page})}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class U{constructor(){x(this,"_sourcesConfig",new E.a),x(this,"_newsApi",new O(E.b)),x(this,"_searchPanel",new S({sources:this._sourcesConfig.getSearchPanelOptions()})),x(this,"_newsList",void 0),this._searchPanel.submitClick.subscribe(this.onSubmitClick.bind(this))}onSubmitClick(e){let t=e.source,r=e.page;const n=this._sourcesConfig.getUrlConfig(t),i=n.endpoint,o=n.params;this.loadNews(i,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){x(e,t,r[t])})}return e}({},o,{page:r}))}async loadNews(e,t){if(!this._newsList){const e=(await r.e(1).then(r.bind(null,6))).default;this._newsList=new e(document.getElementById("newsListContainer"))}this._searchPanel.disableSubmit(),this._newsList.text="Loading...";try{const r=await this._newsApi.get(e,t);r&&r.articles&&r.articles.length?this._newsList.articles=r.articles:this._newsList.text="Nothing's found. Try changing the channel or page number."}catch(e){console.log(e),this._newsList.text="Oops, something went wrong. Maybe the page number is too big?"}finally{this._searchPanel.enableSubmit()}}}r(4);document.addEventListener("DOMContentLoaded",()=>new U)}]);