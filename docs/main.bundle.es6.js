(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(e,t,i){"use strict";function n(e){return"function"==typeof e}function s(e){return null!=e&&"function"==typeof e[Symbol.iterator]}i.d(t,"b",function(){return n}),i.d(t,"c",function(){return s}),i.d(t,"a",function(){return r});class r{static removeAllChildren(e){for(;e.firstChild;)e.removeChild(e.firstChild)}}},function(e,t,i){"use strict";i.d(t,"b",function(){return s}),i.d(t,"c",function(){return r}),i.d(t,"a",function(){return o});var n=i(2);const s="d63e3d1d1622450aaf814fae749afce1",r=i.n(n).a;class o{constructor(){var e,t,i;e=this,t="_sourcesConfig",i=new Map([["1",{displayName:"Top headlines from BBC News",urlConfig:{endpoint:"top-headlines",params:{sources:"bbc-news"}},isPaginationHidden:!0}],["2",{displayName:"Articles about Bitcoin",urlConfig:{endpoint:"everything",params:{q:"bitcoin"}}}],["3",{displayName:"Top sports headlines",urlConfig:{endpoint:"top-headlines",params:{category:"sport"}}}]]),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}getSearchPanelOptions(){return Array.from(this._sourcesConfig,e=>({value:e[0],displayName:e[1].displayName,isPaginationHidden:e[1].isPaginationHidden}))}getUrlConfig(e){return this._sourcesConfig.get(e).urlConfig}}},function(e,t,i){e.exports=i.p+"d71b28089d8fad554dc1f7a92446bf45.png"},function(e){e.exports={greeting:"Hi there",name:"Alex",passport:1234567890,addresses:[{city:"Minsk",street:"Tirazhnaya",building:150},{city:"Gomel",building:3,street:"Tranzitnaya"}]}},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var n=i(1);async function s(e){(new(await async function(){return(await i.e(0).then(i.bind(null,8))).ErrorHandler}())).handle(e)}const r="https://newsapi.org";class o{constructor(e){var t,i,n;if(n=void 0,(i="_apiKey")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,!e)throw new Error("No API key specified");this._apiKey=e}async get(e,t){const i=this._buildUrl(`/v2/${e}`,t);return await this._getDataFromWeb(i,this._apiKey)}_buildUrl(e,t){const i=Object.keys(t).map(e=>`${e}=${t[e]}`).join("&"),n=`${r}${e}`;return i?`${n}?${i}`:n}async _getDataFromWeb(e,t){const i=t?{"x-api-key":t}:{},n=await fetch(e,{headers:i}),r=await n.json();if("error"===r.status){const e=new a(r);throw s(e.message),e}return r}}class a extends Error{constructor(e){super(),this.name=`NewsAPIError: ${e.code}`,this.message=e.message}}var c=i(0);class u{constructor(){var e,t,i;i=[],(t="_subscribers")in(e=this)?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}emit(e){this._subscribers.forEach(t=>t(e))}subscribe(e){if(!Object(c.b)(e))throw new Error("Only functions are allowed as subscribers.");const t=this._subscribers.length;return this._subscribers=[...this._subscribers,e],new l(()=>this._subscribers=this._subscribers.filter((e,i)=>i!==t))}}class l{constructor(e){this._unsubscribeFn=e}unsubscribe(){Object(c.b)(this._unsubscribeFn)&&this._unsubscribeFn()}}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class b{constructor(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sources,t=void 0===e?[]:e;h(this,"_pageEl",document.getElementById("page")),h(this,"_pageElContainer",document.getElementById("pageContainer")),h(this,"_sourceEl",document.getElementById("source")),h(this,"_submitButton",document.getElementById("submit")),h(this,"_submitClick",new u),h(this,"_sourcesConfig",void 0),this._sourcesConfig=t,this._initSourceOptions(this._sourceEl,t),this._submitButton.addEventListener("click",this._onSubmitClick.bind(this)),this.enableSubmit()}get page(){const e=!this._isPaginationHidden&&this._pageEl&&+this._pageEl.value;if(!Number.isInteger(e)||e<1){const e="The page must be a positive integer number";throw s(e),new TypeError(e)}return e}get source(){return this._sourceEl.value}get submitClick(){return this._submitClick}dispose(){this._pageEl.removeEventListener("click",this._onSubmitClick.bind(this))}disableSubmit(){this._submitButton.setAttribute("disabled","")}enableSubmit(){this._submitButton.removeAttribute("disabled")}_initSourceOptions(e,t){if(!e)throw new Error("Unable to find the source element");c.a.removeAllChildren(e),e.innerHTML=t.map(e=>this._createOption(e)).join(""),this._setPageVisible(),e.addEventListener("change",()=>this._setPageVisible())}get _isPaginationHidden(){return this._sourcesConfig.find(e=>e.value===this.source).isPaginationHidden}_setPageVisible(){this._isPaginationHidden?this._hidePage():this._showPage()}_hidePage(){this._pageElContainer.setAttribute("hidden","")}_showPage(){this._pageElContainer.removeAttribute("hidden")}_createOption(e){let t=e.displayName;return`<option value="${e.value}">${t}</option>`}_onSubmitClick(){this.submitClick.emit({source:this.source,page:this.page})}}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g{constructor(){d(this,"_sourcesConfig",new n.a),d(this,"_newsApi",new o(n.b)),d(this,"_searchPanel",new b({sources:this._sourcesConfig.getSearchPanelOptions()})),d(this,"_newsList",void 0),this._searchPanel.submitClick.subscribe(this.onSubmitClick.bind(this))}onSubmitClick(e){let t=e.source,i=e.page;const n=this._sourcesConfig.getUrlConfig(t),s=n.endpoint,r=n.params;this.loadNews(s,function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){d(e,t,i[t])})}return e}({},r,{page:i}))}async loadNews(e,t){const n=(await i.e(2).then(i.bind(null,7))).default;this._newsList||(this._newsList=new n(document.getElementById("newsListContainer"))),this._searchPanel.disableSubmit(),this._newsList.text="Loading...";try{const i=await this._newsApi.get(e,t);i&&i.articles&&i.articles.length?this._newsList.articles=i.articles:this._newsList.text="Nothing's found. Try changing the channel or page number."}catch(e){console.log(e);const t="Oops, something went wrong. Maybe the page number is too big?";this._newsList.text=t,s(t)}finally{this._searchPanel.enableSubmit()}}}i(4);var p=i(3);console.log({json:p}),document.addEventListener("DOMContentLoaded",()=>new g)}],[[5,3]]]);